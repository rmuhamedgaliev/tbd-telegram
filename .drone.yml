kind: pipeline
name: default

steps:
  - name: sonar
    image: gradle:7.3.1-jdk17
    environment:
      SONAR_TOKEN:
          from_secret: SONAR_TOKEN
    commands:
      - ./gradlew build test sonarqube
    when:
      event:
        - push
      branch:
        - master
